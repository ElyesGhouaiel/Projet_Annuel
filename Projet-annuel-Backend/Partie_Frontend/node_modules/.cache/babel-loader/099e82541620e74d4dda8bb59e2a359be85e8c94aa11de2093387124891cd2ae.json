{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yujir\\\\Desktop\\\\projet annuel ek\\\\Projet-annuel-Backend\\\\Partie_Frontend\\\\src\\\\components\\\\PageAdmin.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nimport { jwtDecode } from 'jwt-decode';\nimport './Admin.css';\nimport { Bar, Line, Pie, Radar } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport Video from '../img/city-night-panorama-moewalls-com.mp4';\n\n//page faite par elyes\n\n//composant réservé au user qui sont Admin\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PageAdmin() {\n  _s();\n  const [role, setRole] = useState('');\n  const [userId, setUserId] = useState('');\n  const [token, setToken] = useState('');\n  const [totalFile, setTotalFile] = useState(2);\n  const [totalFileNow, setTotalFileNow] = useState(0);\n  const [chartType, setChartType] = useState('bar');\n  const [totalFileByUser, setFileByUser] = useState([]);\n  const [AllFileOfUsers, setAllfilesOFUsers] = useState([]);\n\n  // États pour le filtrage et le tri\n  const [filterNom, setFilterNom] = useState('');\n  const [filterDate, setFilterDate] = useState('');\n  const [filterUserId, setFilterUserId] = useState('');\n  const [sortType, setSortType] = useState('date'); // Ajout d'état pour le tri\n\n  useEffect(() => {\n    const value = Cookies.get('token');\n    if (value) {\n      const decodedToken = jwtDecode(value);\n      const tokenData = JSON.parse(value);\n      setUserId(decodedToken.id);\n      setRole(decodedToken.role);\n      setToken(tokenData);\n    }\n  }, []);\n\n  // on appelle les api qui permettent d'avoir des infos sur les user, les fichiers etc...\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.post('http://localhost:8000/file/fileAllcount', {\n          token: token\n        });\n        if (response.status === 200) {\n          setTotalFile(response.data);\n        }\n      } catch (error) {\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\n      }\n      try {\n        const responseNow = await axios.post('http://localhost:8000/file/fileAllcountNow', {\n          token: token\n        });\n        if (responseNow.status === 200) {\n          setTotalFileNow(responseNow.data);\n        }\n      } catch (error) {\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\n      }\n      try {\n        const FileByUsers = await axios.post('http://localhost:8000/file/repartition', {\n          token: token\n        });\n        if (FileByUsers.status === 200) {\n          setFileByUser(FileByUsers.data);\n          console.log(FileByUsers.data);\n        }\n      } catch (error) {\n        console.error('Une erreur s\\'est produite , attention :', error);\n      }\n      try {\n        const AllFilesOFUsers = await axios.post('http://localhost:8000/file/showAllFiles', {\n          token: token\n        });\n        if (AllFilesOFUsers.status === 200) {\n          setAllfilesOFUsers(AllFilesOFUsers.data);\n          console.log(AllFilesOFUsers.data);\n        }\n      } catch (error) {\n        console.error('Une erreur s\\'est produite , attention :', error);\n      }\n    };\n    fetchData();\n  }, [token]);\n  const data = {\n    labels: ['Total de fichier uploadé', 'Fichier uploadé aujourd\\'hui'],\n    datasets: [{\n      label: 'Nombre de fichiers',\n      data: [totalFile, totalFileNow],\n      backgroundColor: ['#5eabbae5', '#454040'] // Liste des couleurs de fond\n    }]\n  };\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        labels: {\n          color: 'white',\n          // Couleur des labels de la légende\n          font: {\n            size: 20 // Taille de la police des labels de la légende\n          }\n        }\n      },\n      tooltip: {\n        titleColor: 'white',\n        // Couleur du titre des tooltips\n        bodyColor: 'white',\n        // Couleur du texte des tooltips\n        backgroundColor: '#5eabbae5' // Couleur de fond des tooltips pour plus de contraste\n      }\n    }\n  };\n  const renderChart = () => {\n    switch (chartType) {\n      case 'line':\n        return /*#__PURE__*/_jsxDEV(Line, {\n          data: data,\n          options: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 16\n        }, this);\n      case 'pie':\n        return /*#__PURE__*/_jsxDEV(Pie, {\n          data: data,\n          options: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 16\n        }, this);\n      case 'radar':\n        return /*#__PURE__*/_jsxDEV(Radar, {\n          data: data,\n          options: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(Bar, {\n          data: data,\n          options: options\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  // Filtrage et tri des fichiers\n  const filteredFiles = AllFileOfUsers.filter(file => (filterNom === '' || file.nom.toLowerCase().includes(filterNom.toLowerCase())) && (filterDate === '' || file.createdAt.includes(filterDate)) && (filterUserId === '' || file.userid.toString().includes(filterUserId))).sort((a, b) => {\n    if (sortType === 'date') {\n      return new Date(b.createdAt) - new Date(a.createdAt); // Tri par date d'upload\n    } else if (sortType === 'size') {\n      return b.Taille - a.Taille; // Tri par taille\n    }\n    return 0;\n  });\n\n  // Fonction pour formater la taille en bytes en une chaîne lisible\n  // bytes: nombre de bytes à formater\n  // decimalPlaces: nombre de décimales à afficher (par défaut 2)\n  const formatBytes = (bytes, decimalPlaces = 2) => {\n    // Si le nombre de bytes est 0, retourne directement '0 Byte'\n    if (bytes === 0) return '0 Byte';\n\n    // Définition de la base pour les conversions (1024 pour les unités binaires)\n    const k = 1024;\n\n    // Assure que le nombre de décimales est au moins 0\n    const dm = decimalPlaces < 0 ? 0 : decimalPlaces;\n\n    // Tableau des unités de mesure de taille\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n    // Calcule l'index de l'unité appropriée\n    // Math.log(bytes) / Math.log(k) donne le nombre de fois que k entre dans bytes\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n    // Calcule la valeur en l'unité appropriée et la formate\n    // Math.pow(k, i) calcule k^i\n    // toFixed(dm) arrondit à 'dm' décimales\n    // parseFloat supprime les zéros inutiles à la fin\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      autoPlay: true,\n      muted: true,\n      loop: true,\n      className: \"background-video\",\n      children: /*#__PURE__*/_jsxDEV(\"source\", {\n        src: Video,\n        type: \"video/mp4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 5\n    }, this), role === 'Admin' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"chart-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Statistiques\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"chartType\",\n            children: \"Type de graphique :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"chartType\",\n            value: chartType,\n            onChange: e => setChartType(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"bar\",\n              children: \"Barre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"line\",\n              children: \"Ligne\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"pie\",\n              children: \"Camembert\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"radar\",\n              children: \"Radar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container\",\n          children: renderChart()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"users-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Liste des utilisateurs\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"data-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Nom et pr\\xE9nom\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Fichiers upload\\xE9s\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Stockage utilis\\xE9 / Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: totalFileByUser.map(file => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: file.userId\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: `${file.nom} ${file.prenom}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: file.nombre_de_fichiers\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: `${formatBytes(file.taille_totale_fichiers)} / ${formatBytes(parseFloat(file.quantiteStockage), 2)}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 21\n                }, this)]\n              }, file.userId, true, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"files-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"section-title\",\n          children: \"Liste des fichiers\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filter-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Filtrer par nom de fichier\",\n            value: filterNom,\n            onChange: e => setFilterNom(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: filterDate,\n            onChange: e => setFilterDate(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Filtrer par ID d'utilisateur\",\n            value: filterUserId,\n            onChange: e => setFilterUserId(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sort-control\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"sortType\",\n              children: \"Trier par :\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              id: \"sortType\",\n              value: sortType,\n              onChange: e => setSortType(e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"date\",\n                children: \"Date d'upload\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 261,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"size\",\n                children: \"Poids\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-container\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"data-table\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"ID\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Nom du fichier\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Taille\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Date de cr\\xE9ation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 273,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"ID utilisateur\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Email utilisateur\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: filteredFiles.map(file => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: file.id\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: file.nom\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: formatBytes(file.Taille)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: new Date(file.createdAt).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 284,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: file.userid\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: file.userEmail\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 21\n                }, this)]\n              }, file.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-denied\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Acc\\xE8s refus\\xE9\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Vous n'avez pas les droits n\\xE9cessaires pour acc\\xE9der \\xE0 cette page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.href = '/User',\n        className: \"back-button\",\n        children: \"Retour\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 185,\n    columnNumber: 3\n  }, this);\n}\n_s(PageAdmin, \"a+8Tqb0Yq++8Hb1p8HJx+Cbb0qs=\");\n_c = PageAdmin;\nexport default PageAdmin;\nvar _c;\n$RefreshReg$(_c, \"PageAdmin\");","map":{"version":3,"names":["React","useState","useEffect","axios","Cookies","jwtDecode","Bar","Line","Pie","Radar","Video","jsxDEV","_jsxDEV","PageAdmin","_s","role","setRole","userId","setUserId","token","setToken","totalFile","setTotalFile","totalFileNow","setTotalFileNow","chartType","setChartType","totalFileByUser","setFileByUser","AllFileOfUsers","setAllfilesOFUsers","filterNom","setFilterNom","filterDate","setFilterDate","filterUserId","setFilterUserId","sortType","setSortType","value","get","decodedToken","tokenData","JSON","parse","id","fetchData","response","post","status","data","error","console","responseNow","FileByUsers","log","AllFilesOFUsers","labels","datasets","label","backgroundColor","options","responsive","maintainAspectRatio","plugins","legend","color","font","size","tooltip","titleColor","bodyColor","renderChart","fileName","_jsxFileName","lineNumber","columnNumber","filteredFiles","filter","file","nom","toLowerCase","includes","createdAt","userid","toString","sort","a","b","Date","Taille","formatBytes","bytes","decimalPlaces","k","dm","sizes","i","Math","floor","parseFloat","pow","toFixed","className","children","autoPlay","muted","loop","src","type","htmlFor","onChange","e","target","map","prenom","nombre_de_fichiers","taille_totale_fichiers","quantiteStockage","placeholder","toLocaleDateString","userEmail","onClick","window","location","href","_c","$RefreshReg$"],"sources":["C:/Users/yujir/Desktop/projet annuel ek/Projet-annuel-Backend/Partie_Frontend/src/components/PageAdmin.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nimport {jwtDecode} from 'jwt-decode';\r\nimport './Admin.css';\r\nimport { Bar, Line, Pie, Radar } from 'react-chartjs-2';\r\nimport 'chart.js/auto';\r\nimport Video from '../img/city-night-panorama-moewalls-com.mp4';\r\n\r\n//page faite par elyes\r\n\r\n//composant réservé au user qui sont Admin\r\nfunction PageAdmin() {\r\n  const [role, setRole] = useState('');\r\n  const [userId, setUserId] = useState('');\r\n  const [token, setToken] = useState('');\r\n  const [totalFile, setTotalFile] = useState(2);\r\n  const [totalFileNow, setTotalFileNow] = useState(0);\r\n  const [chartType, setChartType] = useState('bar');\r\n  const [totalFileByUser, setFileByUser] = useState([]);\r\n  const [AllFileOfUsers, setAllfilesOFUsers] = useState([]);\r\n\r\n  // États pour le filtrage et le tri\r\n  const [filterNom, setFilterNom] = useState('');\r\n  const [filterDate, setFilterDate] = useState('');\r\n  const [filterUserId, setFilterUserId] = useState('');\r\n  const [sortType, setSortType] = useState('date'); // Ajout d'état pour le tri\r\n\r\n  useEffect(() => {\r\n    const value = Cookies.get('token');\r\n    if (value) {\r\n      const decodedToken = jwtDecode(value);\r\n      const tokenData = JSON.parse(value);\r\n\r\n      setUserId(decodedToken.id);\r\n      setRole(decodedToken.role);\r\n      setToken(tokenData);\r\n    }\r\n  }, []);\r\n\r\n\r\n  // on appelle les api qui permettent d'avoir des infos sur les user, les fichiers etc...\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.post('http://localhost:8000/file/fileAllcount', {\r\n          token: token\r\n        });\r\n        if (response.status === 200) {\r\n          setTotalFile(response.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\r\n      }\r\n\r\n      try {\r\n        const responseNow = await axios.post('http://localhost:8000/file/fileAllcountNow', {\r\n          token: token\r\n        });\r\n        if (responseNow.status === 200) {\r\n          setTotalFileNow(responseNow.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Une erreur s\\'est produite lors de la récupération des fichiers :', error);\r\n      }\r\n\r\n      try {\r\n        const FileByUsers = await axios.post('http://localhost:8000/file/repartition', {\r\n          token: token\r\n        });\r\n        if (FileByUsers.status === 200) {\r\n          setFileByUser(FileByUsers.data);\r\n          console.log(FileByUsers.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Une erreur s\\'est produite , attention :', error);\r\n      }\r\n\r\n      try {\r\n        const AllFilesOFUsers = await axios.post('http://localhost:8000/file/showAllFiles', {\r\n          token: token\r\n        });\r\n        if (AllFilesOFUsers.status === 200) {\r\n          setAllfilesOFUsers(AllFilesOFUsers.data);\r\n          console.log(AllFilesOFUsers.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Une erreur s\\'est produite , attention :', error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [token]);\r\n\r\n  const data = {\r\n    labels: ['Total de fichier uploadé', 'Fichier uploadé aujourd\\'hui'],\r\n    datasets: [\r\n      {\r\n        label: 'Nombre de fichiers',\r\n        data: [totalFile, totalFileNow],\r\n        backgroundColor: ['#5eabbae5', '#454040'], // Liste des couleurs de fond\r\n \r\n      },\r\n    ],\r\n  };\r\n\r\n  const options = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: {\r\n      legend: {\r\n        labels: {\r\n          color: 'white', // Couleur des labels de la légende\r\n          font: {\r\n            size: 20 // Taille de la police des labels de la légende\r\n          }\r\n        }\r\n      },\r\n      tooltip: {\r\n        titleColor: 'white', // Couleur du titre des tooltips\r\n        bodyColor: 'white', // Couleur du texte des tooltips\r\n        backgroundColor: '#5eabbae5', // Couleur de fond des tooltips pour plus de contraste\r\n      }\r\n    },\r\n  };\r\n\r\n  const renderChart = () => {\r\n    switch (chartType) {\r\n      case 'line':\r\n        return <Line data={data} options={options} />;\r\n      case 'pie':\r\n        return <Pie data={data} options={options} />;\r\n      case 'radar':\r\n        return <Radar data={data} options={options} />;\r\n      default:\r\n        return <Bar data={data} options={options} />;\r\n    }\r\n  };\r\n\r\n  // Filtrage et tri des fichiers\r\n  const filteredFiles = AllFileOfUsers\r\n    .filter(file => \r\n      (filterNom === '' || file.nom.toLowerCase().includes(filterNom.toLowerCase())) &&\r\n      (filterDate === '' || file.createdAt.includes(filterDate)) &&\r\n      (filterUserId === '' || file.userid.toString().includes(filterUserId))\r\n    )\r\n    .sort((a, b) => {\r\n      if (sortType === 'date') {\r\n        return new Date(b.createdAt) - new Date(a.createdAt); // Tri par date d'upload\r\n      } else if (sortType === 'size') {\r\n        return b.Taille - a.Taille; // Tri par taille\r\n      }\r\n      return 0;\r\n    });\r\n\r\n\r\n// Fonction pour formater la taille en bytes en une chaîne lisible\r\n// bytes: nombre de bytes à formater\r\n// decimalPlaces: nombre de décimales à afficher (par défaut 2)\r\nconst formatBytes = (bytes, decimalPlaces = 2) => {\r\n  // Si le nombre de bytes est 0, retourne directement '0 Byte'\r\n  if (bytes === 0) return '0 Byte';\r\n\r\n  // Définition de la base pour les conversions (1024 pour les unités binaires)\r\n  const k = 1024;\r\n\r\n  // Assure que le nombre de décimales est au moins 0\r\n  const dm = decimalPlaces < 0 ? 0 : decimalPlaces;\r\n\r\n  // Tableau des unités de mesure de taille\r\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n\r\n  // Calcule l'index de l'unité appropriée\r\n  // Math.log(bytes) / Math.log(k) donne le nombre de fois que k entre dans bytes\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  \r\n  // Calcule la valeur en l'unité appropriée et la formate\r\n  // Math.pow(k, i) calcule k^i\r\n  // toFixed(dm) arrondit à 'dm' décimales\r\n  // parseFloat supprime les zéros inutiles à la fin\r\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\r\n}\r\n    \r\nreturn (\r\n  <div className=\"admin-dashboard\">\r\n    <video autoPlay muted loop className=\"background-video\">\r\n      <source src={Video} type=\"video/mp4\" />\r\n    </video>\r\n\r\n    {role === 'Admin' ? (\r\n      <div className=\"admin-content\">\r\n        <section className=\"chart-section\">\r\n          <h2 className=\"section-title\">Statistiques</h2>\r\n          <div className=\"chart-controls\">\r\n            <label htmlFor=\"chartType\">Type de graphique :</label>\r\n            <select id=\"chartType\" value={chartType} onChange={(e) => setChartType(e.target.value)}>\r\n              <option value=\"bar\">Barre</option>\r\n              <option value=\"line\">Ligne</option>\r\n              <option value=\"pie\">Camembert</option>\r\n              <option value=\"radar\">Radar</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"chart-container\">\r\n            {renderChart()}\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"users-section\">\r\n          <h2 className=\"section-title\">Liste des utilisateurs</h2>\r\n          <div className=\"table-container\">\r\n            <table className=\"data-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>Nom et prénom</th>\r\n                  <th>Fichiers uploadés</th>\r\n                  <th>Stockage utilisé / Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {totalFileByUser.map(file => (\r\n                  <tr key={file.userId}>\r\n                    <td>{file.userId}</td>\r\n                    <td>{`${file.nom} ${file.prenom}`}</td>\r\n                    <td>{file.nombre_de_fichiers}</td>\r\n                    <td>{`${formatBytes(file.taille_totale_fichiers)} / ${formatBytes(parseFloat(file.quantiteStockage), 2)}`}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"files-section\">\r\n          <h2 className=\"section-title\">Liste des fichiers</h2>\r\n          <div className=\"filter-controls\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Filtrer par nom de fichier\"\r\n              value={filterNom}\r\n              onChange={(e) => setFilterNom(e.target.value)}\r\n            />\r\n            <input\r\n              type=\"date\"\r\n              value={filterDate}\r\n              onChange={(e) => setFilterDate(e.target.value)}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Filtrer par ID d'utilisateur\"\r\n              value={filterUserId}\r\n              onChange={(e) => setFilterUserId(e.target.value)}\r\n            />\r\n            <div className=\"sort-control\">\r\n              <label htmlFor=\"sortType\">Trier par :</label>\r\n              <select\r\n                id=\"sortType\"\r\n                value={sortType}\r\n                onChange={(e) => setSortType(e.target.value)}\r\n              >\r\n                <option value=\"date\">Date d'upload</option>\r\n                <option value=\"size\">Poids</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div className=\"table-container\">\r\n            <table className=\"data-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>Nom du fichier</th>\r\n                  <th>Taille</th>\r\n                  <th>Date de création</th>\r\n                  <th>ID utilisateur</th>\r\n                  <th>Email utilisateur</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredFiles.map(file => (\r\n                  <tr key={file.id}>\r\n                    <td>{file.id}</td>\r\n                    <td>{file.nom}</td>\r\n                    <td>{formatBytes(file.Taille)}</td>\r\n                    <td>{new Date(file.createdAt).toLocaleDateString()}</td>\r\n                    <td>{file.userid}</td>\r\n                    <td>{file.userEmail}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    ) : (\r\n      <div className=\"access-denied\">\r\n        <h1>Accès refusé</h1>\r\n        <p>Vous n'avez pas les droits nécessaires pour accéder à cette page.</p>\r\n        <button onClick={() => window.location.href='/User'} className=\"back-button\">Retour</button>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n}\r\nexport default PageAdmin;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}